{
    "project_name": "CESNET-perun",
    "violation_id": "218",
    "information": {
        "violations": [
            {
                "line": "70",
                "severity": "error",
                "message": "Line has trailing spaces.",
                "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
            }
        ]
    },
    "source_code": "\t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, isSystemGroup, group, resource, \"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n\t\t\t}\n\t\t\t\n\t\t\treturn;\n\t\t}\n",
    "results": [
        {
            "tool": "styler",
            "violations": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/./experiments/projects/CESNET-perun/styler/05_predictions/final/files-repaired/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\nindex 0b0f8af3b35..b3101c7b37f 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/./experiments/projects/CESNET-perun/styler/05_predictions/final/files-repaired/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n@@ -67,8 +67,7 @@ public class urn_perun_group_resource_attribute_def_def_systemUnixGroupName exte\n \t\t\tif(isSystemGroup.getValue() != null && isSystemGroup.valueAsInteger()==1) {\n \t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, isSystemGroup, group, resource, \"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n \t\t\t}\n-\t\t\t\n-\t\t\treturn;\n+\t\treturn;\n \t\t}\n \n \t\t//Get facility for the resource\n",
            "diff_size": 2
        },
        {
            "tool": "checkstyle_idea",
            "violations": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/checkstyle_idea/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\nindex 0b0f8af3b35..d0cebe55fe6 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/checkstyle_idea/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n@@ -24,108 +24,131 @@ import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n /**\n- *\n  * @author Michal Stava email:&lt;stavamichal@gmail.com&gt;\n  */\n-public class urn_perun_group_resource_attribute_def_def_systemUnixGroupName extends GroupResourceAttributesModuleAbstract implements GroupResourceAttributesModuleImplApi {\n-\n-\tprivate static final String A_GR_systemUnixGID = AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF + \":systemUnixGID\";\n-\tprivate static final String A_GR_systemIsUnixGroup = AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF + \":isSystemUnixGroup\";\n-\tprivate static final Pattern pattern = Pattern.compile(\"^[-_a-zA-Z0-9]*$\");\n-\n-\t@Override\n-\tpublic Attribute fillAttribute(PerunSessionImpl sess, Group group, Resource resource, AttributeDefinition attributeDefinition) {\n-\t\treturn new Attribute(attributeDefinition);\n-\t}\n-\n-\t@Override\n-\tpublic void checkAttributeSyntax(PerunSessionImpl sess, Group group, Resource resource, Attribute attribute) throws InternalErrorException, WrongAttributeValueException {\n-\t\tString groupName = attribute.valueAsString();\n-\t\tif (groupName == null) return;\n-\n-\t\tMatcher matcher = pattern.matcher(groupName);\n-\t\tif (!matcher.matches())\n-\t\t\tthrow new WrongAttributeValueException(attribute, group, resource, \"String with other chars than numbers, letters or symbols _ and - is not allowed value.\");\n-\t}\n-\n-\t@Override\n-\tpublic void checkAttributeSemantics(PerunSessionImpl sess, Group group, Resource resource, Attribute attribute) throws InternalErrorException, WrongReferenceAttributeValueException, WrongAttributeAssignmentException{\n-\n-\t\tString groupName = attribute.valueAsString();\n-\t\tAttribute isSystemGroup;\n-\n-\t\tif(groupName==null) {\n-\n-\t\t\ttry {\n-\t\t\t\tisSystemGroup = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, resource, group, A_GR_systemIsUnixGroup);\n-\t\t\t} catch(AttributeNotExistsException ex) {\n-\t\t\t\tthrow new ConsistencyErrorException(\"Not exist Attribute \" + A_GR_systemIsUnixGroup +  \" for group \" + group,ex);\n-\t\t\t} catch (GroupResourceMismatchException ex) {\n-\t\t\t\tthrow new InternalErrorException(ex);\n-\t\t\t}\n-\n-\t\t\tif(isSystemGroup.getValue() != null && isSystemGroup.valueAsInteger()==1) {\n-\t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, isSystemGroup, group, resource, \"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n-\t\t\t}\n-\t\t\t\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t//Get facility for the resource\n-\t\tFacility facility = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, resource);\n-\n-\t\t//List of pairs (group and resource) which has the attribute with the value\n-\t\tList<Pair<Group,Resource>> listGroupPairsResource =sess.getPerunBl().getGroupsManagerBl().getGroupResourcePairsByAttribute(sess, attribute);\n-\n-\t\t//Searching through all pairs and if is not checking group/resource/attribute, then try for being on the same facility, if yes then throw exception but only if these groups have not the same GID too.\n-\t\tfor(Pair<Group,Resource> p : listGroupPairsResource) {\n-\t\t\tif(!p.getLeft().equals(group) || !p.getRight().equals(resource)) {\n-\t\t\t\tFacility facilityForTest = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, p.getRight());\n-\n-\t\t\t\tAttribute group1GID;\n-\t\t\t\tAttribute group2GID;\n-\n-\t\t\t\ttry {\n-\t\t\t\t\tgroup1GID = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, resource, group, A_GR_systemUnixGID);\n-\t\t\t\t} catch (AttributeNotExistsException ex) {\n-\t\t\t\t\tthrow new ConsistencyErrorException(\"Attribute \"+ A_GR_systemUnixGID +\" not exists for group \" + group + \" and resource \" + resource,ex);\n-\t\t\t\t} catch (GroupResourceMismatchException ex) {\n-\t\t\t\t\tthrow new InternalErrorException(ex);\n-\t\t\t\t}\n-\n-\t\t\t\ttry {\n-\n-\t\t\t\t\tgroup2GID = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, p.getRight(), p.getLeft(), A_GR_systemUnixGID);\n-\t\t\t\t} catch (AttributeNotExistsException ex) {\n-\t\t\t\t\tthrow new ConsistencyErrorException(\"Attribute \"+ A_GR_systemUnixGID +\" not exists for group \" + p.getLeft() + \" and resource \" + p.getRight() ,ex);\n-\t\t\t\t} catch (GroupResourceMismatchException ex) {\n-\t\t\t\t\tthrow new InternalErrorException(ex);\n-\t\t\t\t}\n-\n-\t\t\t\tif(facilityForTest.equals(facility) && (group1GID.getValue() != null ? (! group1GID.getValue().equals(group2GID.getValue())) : group2GID != null)) {\n-\t\t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, attribute, group, resource, \"Group name \" + groupName + \"is already used by another group-resource and these have not the same GID and GroupName.  \" + p.getLeft() + \" \" + p.getRight());\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t}\n-\n-\t@Override\n-\tpublic List<String> getDependencies() {\n-\t\tList<String> dependencies = new ArrayList<>();\n-\t\tdependencies.add(A_GR_systemUnixGID);\n-\t\tdependencies.add(A_GR_systemIsUnixGroup);\n-\t\treturn dependencies;\n-\t}\n-\n-\t@Override\n-\tpublic AttributeDefinition getAttributeDefinition() {\n-\t\tAttributeDefinition attr = new AttributeDefinition();\n-\t\tattr.setNamespace(AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF);\n-\t\tattr.setFriendlyName(\"systemUnixGroupName\");\n-\t\tattr.setDisplayName(\"Name of system unix group\");\n-\t\tattr.setType(String.class.getName());\n-\t\tattr.setDescription(\"Name of the system unix group.\");\n-\t\treturn attr;\n-\t}\n+public class urn_perun_group_resource_attribute_def_def_systemUnixGroupName\n+    extends GroupResourceAttributesModuleAbstract implements GroupResourceAttributesModuleImplApi {\n+\n+    private static final String A_GR_systemUnixGID = AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF + \":systemUnixGID\";\n+    private static final String A_GR_systemIsUnixGroup =\n+        AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF + \":isSystemUnixGroup\";\n+    private static final Pattern pattern = Pattern.compile(\"^[-_a-zA-Z0-9]*$\");\n+\n+    @Override\n+    public Attribute fillAttribute(PerunSessionImpl sess, Group group, Resource resource,\n+                                   AttributeDefinition attributeDefinition) {\n+        return new Attribute(attributeDefinition);\n+    }\n+\n+    @Override\n+    public void checkAttributeSyntax(PerunSessionImpl sess, Group group, Resource resource, Attribute attribute)\n+        throws InternalErrorException, WrongAttributeValueException {\n+        String groupName = attribute.valueAsString();\n+        if (groupName == null) {\n+            return;\n+        }\n+\n+        Matcher matcher = pattern.matcher(groupName);\n+        if (!matcher.matches()) {\n+            throw new WrongAttributeValueException(attribute, group, resource,\n+                \"String with other chars than numbers, letters or symbols _ and - is not allowed value.\");\n+        }\n+    }\n+\n+    @Override\n+    public void checkAttributeSemantics(PerunSessionImpl sess, Group group, Resource resource, Attribute attribute)\n+        throws InternalErrorException, WrongReferenceAttributeValueException, WrongAttributeAssignmentException {\n+\n+        String groupName = attribute.valueAsString();\n+        Attribute isSystemGroup;\n+\n+        if (groupName == null) {\n+\n+            try {\n+                isSystemGroup = sess.getPerunBl().getAttributesManagerBl()\n+                    .getAttribute(sess, resource, group, A_GR_systemIsUnixGroup);\n+            } catch (AttributeNotExistsException ex) {\n+                throw new ConsistencyErrorException(\n+                    \"Not exist Attribute \" + A_GR_systemIsUnixGroup + \" for group \" + group, ex);\n+            } catch (GroupResourceMismatchException ex) {\n+                throw new InternalErrorException(ex);\n+            }\n+\n+            if (isSystemGroup.getValue() != null && isSystemGroup.valueAsInteger() == 1) {\n+                throw new WrongReferenceAttributeValueException(attribute, isSystemGroup, group, resource,\n+                    \"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n+            }\n+\n+            return;\n+        }\n+\n+        //Get facility for the resource\n+        Facility facility = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, resource);\n+\n+        //List of pairs (group and resource) which has the attribute with the value\n+        List<Pair<Group, Resource>> listGroupPairsResource =\n+            sess.getPerunBl().getGroupsManagerBl().getGroupResourcePairsByAttribute(sess, attribute);\n+\n+        //Searching through all pairs and if is not checking group/resource/attribute, then try for being on the same facility, if yes then throw exception but only if these groups have not the same GID too.\n+        for (Pair<Group, Resource> p : listGroupPairsResource) {\n+            if (!p.getLeft().equals(group) || !p.getRight().equals(resource)) {\n+                Facility facilityForTest = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, p.getRight());\n+\n+                Attribute group1GID;\n+                Attribute group2GID;\n+\n+                try {\n+                    group1GID = sess.getPerunBl().getAttributesManagerBl()\n+                        .getAttribute(sess, resource, group, A_GR_systemUnixGID);\n+                } catch (AttributeNotExistsException ex) {\n+                    throw new ConsistencyErrorException(\n+                        \"Attribute \" + A_GR_systemUnixGID + \" not exists for group \" + group + \" and resource \" +\n+                            resource, ex);\n+                } catch (GroupResourceMismatchException ex) {\n+                    throw new InternalErrorException(ex);\n+                }\n+\n+                try {\n+\n+                    group2GID = sess.getPerunBl().getAttributesManagerBl()\n+                        .getAttribute(sess, p.getRight(), p.getLeft(), A_GR_systemUnixGID);\n+                } catch (AttributeNotExistsException ex) {\n+                    throw new ConsistencyErrorException(\n+                        \"Attribute \" + A_GR_systemUnixGID + \" not exists for group \" + p.getLeft() + \" and resource \" +\n+                            p.getRight(), ex);\n+                } catch (GroupResourceMismatchException ex) {\n+                    throw new InternalErrorException(ex);\n+                }\n+\n+                if (facilityForTest.equals(facility) &&\n+                    (group1GID.getValue() != null ? (!group1GID.getValue().equals(group2GID.getValue())) :\n+                        group2GID != null)) {\n+                    throw new WrongReferenceAttributeValueException(attribute, attribute, group, resource,\n+                        \"Group name \" + groupName +\n+                            \"is already used by another group-resource and these have not the same GID and GroupName.  \" +\n+                            p.getLeft() + \" \" + p.getRight());\n+                }\n+            }\n+        }\n+\n+    }\n+\n+    @Override\n+    public List<String> getDependencies() {\n+        List<String> dependencies = new ArrayList<>();\n+        dependencies.add(A_GR_systemUnixGID);\n+        dependencies.add(A_GR_systemIsUnixGroup);\n+        return dependencies;\n+    }\n+\n+    @Override\n+    public AttributeDefinition getAttributeDefinition() {\n+        AttributeDefinition attr = new AttributeDefinition();\n+        attr.setNamespace(AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF);\n+        attr.setFriendlyName(\"systemUnixGroupName\");\n+        attr.setDisplayName(\"Name of system unix group\");\n+        attr.setType(String.class.getName());\n+        attr.setDescription(\"Name of the system unix group.\");\n+        return attr;\n+    }\n }\n",
            "diff_size": 126
        },
        {
            "tool": "naturalize",
            "violations": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/naturalize/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\nindex 0b0f8af3b35..561dac4a1bd 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/naturalize/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n@@ -67,15 +67,14 @@ public class urn_perun_group_resource_attribute_def_def_systemUnixGroupName exte\n \t\t\tif(isSystemGroup.getValue() != null && isSystemGroup.valueAsInteger()==1) {\n \t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, isSystemGroup, group, resource, \"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n \t\t\t}\n-\t\t\t\n-\t\t\treturn;\n-\t\t}\n+return;\n+\t}\n \n \t\t//Get facility for the resource\n \t\tFacility facility = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, resource);\n \n \t\t//List of pairs (group and resource) which has the attribute with the value\n-\t\tList<Pair<Group,Resource>> listGroupPairsResource =sess.getPerunBl().getGroupsManagerBl().getGroupResourcePairsByAttribute(sess, attribute);\n+\t\tList<Pair<Group,Resource>> listGroupPairsResource = sess.getPerunBl().getGroupsManagerBl().getGroupResourcePairsByAttribute(sess, attribute);\n \n \t\t//Searching through all pairs and if is not checking group/resource/attribute, then try for being on the same facility, if yes then throw exception but only if these groups have not the same GID too.\n \t\tfor(Pair<Group,Resource> p : listGroupPairsResource) {\n@@ -128,4 +127,4 @@ public class urn_perun_group_resource_attribute_def_def_systemUnixGroupName exte\n \t\tattr.setDescription(\"Name of the system unix group.\");\n \t\treturn attr;\n \t}\n-}\n+}\n\\ No newline at end of file\n",
            "diff_size": 5
        },
        {
            "tool": "codebuff",
            "violations": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/codebuff/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\nindex 0b0f8af3b35..729f65685b5 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/codebuff/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n@@ -17,7 +17,6 @@ import cz.metacentrum.perun.core.api.exceptions.WrongReferenceAttributeValueExce\n import cz.metacentrum.perun.core.impl.PerunSessionImpl;\n import cz.metacentrum.perun.core.implApi.modules.attributes.GroupResourceAttributesModuleAbstract;\n import cz.metacentrum.perun.core.implApi.modules.attributes.GroupResourceAttributesModuleImplApi;\n-\n import java.util.ArrayList;\n import java.util.List;\n import java.util.regex.Matcher;\n@@ -27,105 +26,106 @@ import java.util.regex.Pattern;\n  *\n  * @author Michal Stava email:&lt;stavamichal@gmail.com&gt;\n  */\n+\n+\n public class urn_perun_group_resource_attribute_def_def_systemUnixGroupName extends GroupResourceAttributesModuleAbstract implements GroupResourceAttributesModuleImplApi {\n \n-\tprivate static final String A_GR_systemUnixGID = AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF + \":systemUnixGID\";\n-\tprivate static final String A_GR_systemIsUnixGroup = AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF + \":isSystemUnixGroup\";\n-\tprivate static final Pattern pattern = Pattern.compile(\"^[-_a-zA-Z0-9]*$\");\n-\n-\t@Override\n-\tpublic Attribute fillAttribute(PerunSessionImpl sess, Group group, Resource resource, AttributeDefinition attributeDefinition) {\n-\t\treturn new Attribute(attributeDefinition);\n-\t}\n-\n-\t@Override\n-\tpublic void checkAttributeSyntax(PerunSessionImpl sess, Group group, Resource resource, Attribute attribute) throws InternalErrorException, WrongAttributeValueException {\n-\t\tString groupName = attribute.valueAsString();\n-\t\tif (groupName == null) return;\n-\n-\t\tMatcher matcher = pattern.matcher(groupName);\n-\t\tif (!matcher.matches())\n-\t\t\tthrow new WrongAttributeValueException(attribute, group, resource, \"String with other chars than numbers, letters or symbols _ and - is not allowed value.\");\n-\t}\n-\n-\t@Override\n-\tpublic void checkAttributeSemantics(PerunSessionImpl sess, Group group, Resource resource, Attribute attribute) throws InternalErrorException, WrongReferenceAttributeValueException, WrongAttributeAssignmentException{\n-\n-\t\tString groupName = attribute.valueAsString();\n-\t\tAttribute isSystemGroup;\n-\n-\t\tif(groupName==null) {\n-\n-\t\t\ttry {\n-\t\t\t\tisSystemGroup = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, resource, group, A_GR_systemIsUnixGroup);\n-\t\t\t} catch(AttributeNotExistsException ex) {\n-\t\t\t\tthrow new ConsistencyErrorException(\"Not exist Attribute \" + A_GR_systemIsUnixGroup +  \" for group \" + group,ex);\n-\t\t\t} catch (GroupResourceMismatchException ex) {\n-\t\t\t\tthrow new InternalErrorException(ex);\n-\t\t\t}\n-\n-\t\t\tif(isSystemGroup.getValue() != null && isSystemGroup.valueAsInteger()==1) {\n-\t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, isSystemGroup, group, resource, \"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n-\t\t\t}\n-\t\t\t\n-\t\t\treturn;\n-\t\t}\n-\n-\t\t//Get facility for the resource\n-\t\tFacility facility = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, resource);\n-\n-\t\t//List of pairs (group and resource) which has the attribute with the value\n-\t\tList<Pair<Group,Resource>> listGroupPairsResource =sess.getPerunBl().getGroupsManagerBl().getGroupResourcePairsByAttribute(sess, attribute);\n-\n-\t\t//Searching through all pairs and if is not checking group/resource/attribute, then try for being on the same facility, if yes then throw exception but only if these groups have not the same GID too.\n-\t\tfor(Pair<Group,Resource> p : listGroupPairsResource) {\n-\t\t\tif(!p.getLeft().equals(group) || !p.getRight().equals(resource)) {\n-\t\t\t\tFacility facilityForTest = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, p.getRight());\n-\n-\t\t\t\tAttribute group1GID;\n-\t\t\t\tAttribute group2GID;\n-\n-\t\t\t\ttry {\n-\t\t\t\t\tgroup1GID = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, resource, group, A_GR_systemUnixGID);\n-\t\t\t\t} catch (AttributeNotExistsException ex) {\n-\t\t\t\t\tthrow new ConsistencyErrorException(\"Attribute \"+ A_GR_systemUnixGID +\" not exists for group \" + group + \" and resource \" + resource,ex);\n-\t\t\t\t} catch (GroupResourceMismatchException ex) {\n-\t\t\t\t\tthrow new InternalErrorException(ex);\n-\t\t\t\t}\n-\n-\t\t\t\ttry {\n-\n-\t\t\t\t\tgroup2GID = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, p.getRight(), p.getLeft(), A_GR_systemUnixGID);\n-\t\t\t\t} catch (AttributeNotExistsException ex) {\n-\t\t\t\t\tthrow new ConsistencyErrorException(\"Attribute \"+ A_GR_systemUnixGID +\" not exists for group \" + p.getLeft() + \" and resource \" + p.getRight() ,ex);\n-\t\t\t\t} catch (GroupResourceMismatchException ex) {\n-\t\t\t\t\tthrow new InternalErrorException(ex);\n-\t\t\t\t}\n-\n-\t\t\t\tif(facilityForTest.equals(facility) && (group1GID.getValue() != null ? (! group1GID.getValue().equals(group2GID.getValue())) : group2GID != null)) {\n-\t\t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, attribute, group, resource, \"Group name \" + groupName + \"is already used by another group-resource and these have not the same GID and GroupName.  \" + p.getLeft() + \" \" + p.getRight());\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\n-\t}\n-\n-\t@Override\n-\tpublic List<String> getDependencies() {\n-\t\tList<String> dependencies = new ArrayList<>();\n-\t\tdependencies.add(A_GR_systemUnixGID);\n-\t\tdependencies.add(A_GR_systemIsUnixGroup);\n-\t\treturn dependencies;\n-\t}\n-\n-\t@Override\n-\tpublic AttributeDefinition getAttributeDefinition() {\n-\t\tAttributeDefinition attr = new AttributeDefinition();\n-\t\tattr.setNamespace(AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF);\n-\t\tattr.setFriendlyName(\"systemUnixGroupName\");\n-\t\tattr.setDisplayName(\"Name of system unix group\");\n-\t\tattr.setType(String.class.getName());\n-\t\tattr.setDescription(\"Name of the system unix group.\");\n-\t\treturn attr;\n-\t}\n-}\n+\n+ private static final String A_GR_systemUnixGID = AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF + \":systemUnixGID\";\n+ private static final String A_GR_systemIsUnixGroup = AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF + \":isSystemUnixGroup\";\n+ private static final Pattern pattern = Pattern.compile(\"^[-_a-zA-Z0-9]*$\");\n+\n+ @Override\n+ public Attribute fillAttribute(PerunSessionImpl sess, Group group, Resource resource, AttributeDefinition attributeDefinition) {\n+  return new Attribute(attributeDefinition);\n+ }\n+\n+ @Override\n+ public void checkAttributeSyntax(PerunSessionImpl sess, Group group, Resource resource, Attribute attribute) throws InternalErrorException, WrongAttributeValueException {\n+  String groupName = attribute.valueAsString();\n+  if (groupName == null)\n+   return;\n+  Matcher matcher = pattern.matcher(groupName);\n+  if (!matcher.matches()) throw new WrongAttributeValueException(attribute,\n+group,\n+resource,\n+\"String with other chars than numbers, letters or symbols _ and - is not allowed value.\");\n+ }\n+\n+ @Override\n+ public void checkAttributeSemantics(PerunSessionImpl sess, Group group, Resource resource, Attribute attribute) throws InternalErrorException, WrongReferenceAttributeValueException, WrongAttributeAssignmentException {\n+  String groupName = attribute.valueAsString();\n+  Attribute isSystemGroup;\n+  if (groupName == null) {\n+   try {\n+    isSystemGroup = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, resource, group, A_GR_systemIsUnixGroup);\n+   } catch (AttributeNotExistsException ex) {\n+    throw new ConsistencyErrorException(\"Not exist Attribute \" + A_GR_systemIsUnixGroup + \" for group \" + group, ex);\n+   } catch (GroupResourceMismatchException ex) {\n+    throw new InternalErrorException(ex);\n+   }\n+   if (isSystemGroup.getValue() != null && isSystemGroup.valueAsInteger() == 1) {\n+    throw new WrongReferenceAttributeValueException(attribute,\n+isSystemGroup,\n+group,\n+resource,\n+\"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n+   }\n+\n+   return;\n+  }\n+\n+  //Get facility for the resource\n+  Facility facility = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, resource);\n+\n+  //List of pairs (group and resource) which has the attribute with the value\n+  List<Pair<Group, Resource>> listGroupPairsResource = sess.getPerunBl().getGroupsManagerBl().getGroupResourcePairsByAttribute(sess, attribute);\n+\n+  //Searching through all pairs and if is not checking group/resource/attribute, then try for being on the same facility, if yes then throw exception but only if these groups have not the same GID too.\n+  for (Pair<Group, Resource> p : listGroupPairsResource) {\n+   if (!p.getLeft().equals(group) || !p.getRight().equals(resource)) {\n+    Facility facilityForTest = sess.getPerunBl().getResourcesManagerBl().getFacility(sess, p.getRight());\n+    Attribute group1GID;\n+    Attribute group2GID;\n+    try {\n+     group1GID = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, resource, group, A_GR_systemUnixGID);\n+    } catch (AttributeNotExistsException ex) {\n+     throw new ConsistencyErrorException(\"Attribute \" + A_GR_systemUnixGID + \" not exists for group \" + group + \" and resource \" + resource, ex);\n+    } catch (GroupResourceMismatchException ex) {\n+     throw new InternalErrorException(ex);\n+    }\n+\n+    try {\n+     group2GID = sess.getPerunBl().getAttributesManagerBl().getAttribute(sess, p.getRight(), p.getLeft(), A_GR_systemUnixGID);\n+    } catch (AttributeNotExistsException ex) {\n+     throw new ConsistencyErrorException(\"Attribute \" + A_GR_systemUnixGID + \" not exists for group \" + p.getLeft() + \" and resource \" + p.getRight(),\n+ex);\n+    } catch (GroupResourceMismatchException ex) {\n+     throw new InternalErrorException(ex);\n+    }\n+    if (facilityForTest.equals(facility) && (group1GID.getValue() != null ? (!group1GID.getValue().equals(group2GID.getValue())) : group2GID != null)) {\n+     throw new WrongReferenceAttributeValueException(attribute, attribute, group, resource, \"Group name \" + groupName + \"is already used by another group-resource and these have not the same GID and GroupName.  \" + p.getLeft() + \" \" + p.getRight());\n+    }\n+   }\n+  }\n+ }\n+\n+ @Override\n+ public List<String> getDependencies() {\n+  List<String> dependencies = new ArrayList<>();\n+  dependencies.add(A_GR_systemUnixGID);\n+  dependencies.add(A_GR_systemIsUnixGroup);\n+  return dependencies;\n+ }\n+\n+ @Override\n+ public AttributeDefinition getAttributeDefinition() {\n+  AttributeDefinition attr = new AttributeDefinition();\n+  attr.setNamespace(AttributesManager.NS_GROUP_RESOURCE_ATTR_DEF);\n+  attr.setFriendlyName(\"systemUnixGroupName\");\n+  attr.setDisplayName(\"Name of system unix group\");\n+  attr.setType(String.class.getName());\n+  attr.setDescription(\"Name of the system unix group.\");\n+  return attr;\n+ }\n+}\n\\ No newline at end of file\n",
            "diff_size": 103
        },
        {
            "tool": "styler_random",
            "violations": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/styler/05_predictions/random/files-repaired/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\nindex 0b0f8af3b35..b3101c7b37f 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/styler/05_predictions/random/files-repaired/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n@@ -67,8 +67,7 @@ public class urn_perun_group_resource_attribute_def_def_systemUnixGroupName exte\n \t\t\tif(isSystemGroup.getValue() != null && isSystemGroup.valueAsInteger()==1) {\n \t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, isSystemGroup, group, resource, \"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n \t\t\t}\n-\t\t\t\n-\t\t\treturn;\n+\t\treturn;\n \t\t}\n \n \t\t//Get facility for the resource\n",
            "diff_size": 2
        },
        {
            "tool": "styler_three_grams",
            "violations": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/styler/05_predictions/three_grams/files-repaired/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\nindex 0b0f8af3b35..7fe7013efb0 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/styler/05_predictions/three_grams/files-repaired/218/urn_perun_group_resource_attribute_def_def_systemUnixGroupName.java\n@@ -66,9 +66,7 @@ public class urn_perun_group_resource_attribute_def_def_systemUnixGroupName exte\n \n \t\t\tif(isSystemGroup.getValue() != null && isSystemGroup.valueAsInteger()==1) {\n \t\t\t\tthrow new WrongReferenceAttributeValueException(attribute, isSystemGroup, group, resource, \"Attribute cant be null if \" + group + \" on \" + resource + \" is system unix group.\");\n-\t\t\t}\n-\t\t\t\n-\t\t\treturn;\n+\t\t\t\t\t} return;\n \t\t}\n \n \t\t//Get facility for the resource\n",
            "diff_size": 3
        }
    ],
    "repaired_by": [
        "styler",
        "checkstyle_idea",
        "naturalize",
        "codebuff",
        "styler_random",
        "styler_three_grams"
    ],
    "not_repaired_by": []
}