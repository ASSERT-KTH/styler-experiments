{
    "project_name": "CESNET-perun",
    "violation_id": "209",
    "information": {
        "violations": [
            {
                "line": "60",
                "severity": "error",
                "message": "Space before tab.",
                "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
            }
        ]
    },
    "source_code": "        /**\n\t * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n\t * \tFormat is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n\t *\n\t * @param sess PerunSession\n\t * @param user User to fill attribute for",
    "results": [
        {
            "tool": "styler",
            "violations": [
                {
                    "line": "60",
                    "severity": "error",
                    "message": "Space before tab.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/./experiments/projects/CESNET-perun/styler/05_predictions/final/files-repaired/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\nindex 0cd9ec9cac5..0d8c4b4c1ba 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/./experiments/projects/CESNET-perun/styler/05_predictions/final/files-repaired/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n@@ -55,7 +55,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t\t}\n \t}\n \n-        /**\n+/**\n \t * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n \t * \tFormat is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n \t *\n@@ -66,7 +66,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t * @throws InternalErrorException\n \t * @throws WrongAttributeAssignmentException\n \t */\n-\tprivate Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n+ private Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n \t\ttry {\n \t\t\tattribute.setValue(sha1HashCount(user).toString() + this.domainNameBbmri);\n \t\t\tcheckAttributeValue(sess, user, attribute);\n",
            "diff_size": 2
        },
        {
            "tool": "checkstyle_idea",
            "violations": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/checkstyle_idea/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\nindex 0cd9ec9cac5..41a50f36ac2 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/checkstyle_idea/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n@@ -22,120 +22,125 @@ import java.security.NoSuchAlgorithmException;\n  * @author Sona Mastrakova <sona.mastrakova@gmail.com>\n  * @author Ondrej Velisek <ondrejvelisek@gmail.com>\n  * @author Jakub Hruska <jhruska@mail.muni.cz>\n- *\n  * @date 07.11.2016\n  */\n-public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow extends urn_perun_user_attribute_def_def_login_namespace {\n+public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow\n+    extends urn_perun_user_attribute_def_def_login_namespace {\n \n-        private final static Logger log = LoggerFactory.getLogger(urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.class);\n-        private final String extSourceNameBbmri = \"https://login.bbmri-eric.eu/idp/\";\n-        private final String domainNameBbmri = \"@bbmri.eu\";\n-        private final String attrNameBbmri = \"login-namespace:bbmri-persistent-shadow\";\n+    private final static Logger log =\n+        LoggerFactory.getLogger(urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.class);\n+    private final String extSourceNameBbmri = \"https://login.bbmri-eric.eu/idp/\";\n+    private final String domainNameBbmri = \"@bbmri.eu\";\n+    private final String attrNameBbmri = \"login-namespace:bbmri-persistent-shadow\";\n \n-        /**\n-\t * Filling implemented for login:namespace:bbmri-persistent attribute\n-\t *\n-\t * @param perunSession PerunSession\n-\t * @param user User to fill attribute for\n-\t * @param attribute Attribute to fill value to\n-\t * @return Filled attribute\n-\t * @throws InternalErrorException\n-\t * @throws WrongAttributeAssignmentException\n-\t */\n-        @Override\n-        public Attribute fillAttribute(PerunSessionImpl perunSession, User user, AttributeDefinition attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n+    /**\n+     * Filling implemented for login:namespace:bbmri-persistent attribute\n+     *\n+     * @param perunSession PerunSession\n+     * @param user         User to fill attribute for\n+     * @param attribute    Attribute to fill value to\n+     * @return Filled attribute\n+     * @throws InternalErrorException\n+     * @throws WrongAttributeAssignmentException\n+     */\n+    @Override\n+    public Attribute fillAttribute(PerunSessionImpl perunSession, User user, AttributeDefinition attribute)\n+        throws InternalErrorException, WrongAttributeAssignmentException {\n \n-\t\tAttribute filledAttribute = new Attribute(attribute);\n+        Attribute filledAttribute = new Attribute(attribute);\n \n-\t\tif (attribute.getFriendlyName().equals(this.attrNameBbmri)) {\n-\t\t\treturn generateLoginValueBbmri(perunSession, user, filledAttribute);\n-\t\t} else {\n-\t\t\t// without value\n-\t\t\treturn filledAttribute;\n-\t\t}\n-\t}\n+        if (attribute.getFriendlyName().equals(this.attrNameBbmri)) {\n+            return generateLoginValueBbmri(perunSession, user, filledAttribute);\n+        } else {\n+            // without value\n+            return filledAttribute;\n+        }\n+    }\n \n-        /**\n-\t * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n-\t * \tFormat is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n-\t *\n-\t * @param sess PerunSession\n-\t * @param user User to fill attribute for\n-\t * @param attribute Attribute to fill value with\n-\t * @return Filled attribute\n-\t * @throws InternalErrorException\n-\t * @throws WrongAttributeAssignmentException\n-\t */\n-\tprivate Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n-\t\ttry {\n-\t\t\tattribute.setValue(sha1HashCount(user).toString() + this.domainNameBbmri);\n-\t\t\tcheckAttributeValue(sess, user, attribute);\n-\t\t\treturn attribute;\n-\t\t} catch (WrongAttributeValueException ex) {\n-\t\t\treturn attribute;\n-\t\t}\n-\t}\n+    /**\n+     * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n+     * Format is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n+     *\n+     * @param sess      PerunSession\n+     * @param user      User to fill attribute for\n+     * @param attribute Attribute to fill value with\n+     * @return Filled attribute\n+     * @throws InternalErrorException\n+     * @throws WrongAttributeAssignmentException\n+     */\n+    private Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute)\n+        throws InternalErrorException, WrongAttributeAssignmentException {\n+        try {\n+            attribute.setValue(sha1HashCount(user).toString() + this.domainNameBbmri);\n+            checkAttributeValue(sess, user, attribute);\n+            return attribute;\n+        } catch (WrongAttributeValueException ex) {\n+            return attribute;\n+        }\n+    }\n \n-        /**\n-\t * Sha1HashCount() counts sha1hash for bbmri-persistent namespace from user's id\n-\t *\n-\t * @param user user with the id\n-\t * @return counted hash\n-\t */\n-\tprivate StringBuilder sha1HashCount(User user) throws InternalErrorException {\n-\t\ttry {\n-\t\t\tMessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n-\t\t\t// counts sha1hash and converts output to hex\n-\t\t\tbyte[] result = mDigest.digest(ByteBuffer.allocate(4).putInt(user.getId()).array());\n-\t\t\tStringBuilder sb = new StringBuilder();\n-\t\t\tfor (int i = 0; i < result.length; i++) {\n-\t\t\t\tsb.append(Integer.toString((result[i] & 0xff) + 0x100, 16).substring(1));\n-\t\t\t}\n+    /**\n+     * Sha1HashCount() counts sha1hash for bbmri-persistent namespace from user's id\n+     *\n+     * @param user user with the id\n+     * @return counted hash\n+     */\n+    private StringBuilder sha1HashCount(User user) throws InternalErrorException {\n+        try {\n+            MessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n+            // counts sha1hash and converts output to hex\n+            byte[] result = mDigest.digest(ByteBuffer.allocate(4).putInt(user.getId()).array());\n+            StringBuilder sb = new StringBuilder();\n+            for (int i = 0; i < result.length; i++) {\n+                sb.append(Integer.toString((result[i] & 0xff) + 0x100, 16).substring(1));\n+            }\n \n-\t\t\treturn sb;\n-\t\t} catch (NoSuchAlgorithmException ex) {\n-\t\t\tthrow new InternalErrorException(\"Algorithm for sha1hash was not found.\", ex);\n-\t\t}\n-\t}\n+            return sb;\n+        } catch (NoSuchAlgorithmException ex) {\n+            throw new InternalErrorException(\"Algorithm for sha1hash was not found.\", ex);\n+        }\n+    }\n \n-        /**\n-\t * ChangedAttributeHook() sets UserExtSource with following properties:\n-\t *  - extSourceType is IdP\n-\t *  - extSourceName is https://login.bbmri-eric.eu/idp/\n-\t *  - user's extSource login is the same as his bbmri-persistent attribute\n-\t *\n-\t * @param session PerunSession\n-\t * @param user User to set UserExtSource for\n-\t * @param attribute Attribute containing bbmriID\n-\t * @throws cz.metacentrum.perun.core.api.exceptions.InternalErrorException\n-\t * @throws cz.metacentrum.perun.core.api.exceptions.WrongReferenceAttributeValueException\n-\t */\n-\t@Override\n-\tpublic void changedAttributeHook(PerunSessionImpl session, User user, Attribute attribute) throws InternalErrorException, WrongReferenceAttributeValueException {\n-\t\ttry {\n-\t\t\tString userNamespace = attribute.getFriendlyNameParameter();\n+    /**\n+     * ChangedAttributeHook() sets UserExtSource with following properties:\n+     * - extSourceType is IdP\n+     * - extSourceName is https://login.bbmri-eric.eu/idp/\n+     * - user's extSource login is the same as his bbmri-persistent attribute\n+     *\n+     * @param session   PerunSession\n+     * @param user      User to set UserExtSource for\n+     * @param attribute Attribute containing bbmriID\n+     * @throws cz.metacentrum.perun.core.api.exceptions.InternalErrorException\n+     * @throws cz.metacentrum.perun.core.api.exceptions.WrongReferenceAttributeValueException\n+     */\n+    @Override\n+    public void changedAttributeHook(PerunSessionImpl session, User user, Attribute attribute)\n+        throws InternalErrorException, WrongReferenceAttributeValueException {\n+        try {\n+            String userNamespace = attribute.getFriendlyNameParameter();\n \n-\t\t\tif(userNamespace.equals(\"bbmri-persistent-shadow\") && attribute.getValue() != null){\n-\t\t\t\tExtSource extSource = session.getPerunBl().getExtSourcesManagerBl().getExtSourceByName(session, extSourceNameBbmri);\n-\t\t\t\tUserExtSource userExtSource = new UserExtSource(extSource, 0, attribute.getValue().toString());\n+            if (userNamespace.equals(\"bbmri-persistent-shadow\") && attribute.getValue() != null) {\n+                ExtSource extSource =\n+                    session.getPerunBl().getExtSourcesManagerBl().getExtSourceByName(session, extSourceNameBbmri);\n+                UserExtSource userExtSource = new UserExtSource(extSource, 0, attribute.getValue().toString());\n \n-\t\t\t\tsession.getPerunBl().getUsersManagerBl().addUserExtSource(session, user, userExtSource);\n-\t\t\t}\n-\t\t} catch (UserExtSourceExistsException ex) {\n-\t\t\tlog.warn(\"BBMRI IdP external source already exists for the user.\", ex);\n-\t\t} catch (ExtSourceNotExistsException ex) {\n-\t\t\tthrow new InternalErrorException(\"IdP external source for BBMRI doesn't exist.\", ex);\n-\t\t}\n-\t}\n+                session.getPerunBl().getUsersManagerBl().addUserExtSource(session, user, userExtSource);\n+            }\n+        } catch (UserExtSourceExistsException ex) {\n+            log.warn(\"BBMRI IdP external source already exists for the user.\", ex);\n+        } catch (ExtSourceNotExistsException ex) {\n+            throw new InternalErrorException(\"IdP external source for BBMRI doesn't exist.\", ex);\n+        }\n+    }\n \n-        public AttributeDefinition getAttributeDefinition() {\n-\t\tAttributeDefinition attr = new AttributeDefinition();\n-\t\tattr.setNamespace(AttributesManager.NS_USER_ATTR_DEF);\n-\t\tattr.setFriendlyName(\"login-namespace:bbmri-persistent-shadow\");\n-\t\tattr.setDisplayName(\"BBMRI login\");\n-\t\tattr.setType(String.class.getName());\n-\t\tattr.setDescription(\"Login to BBMRI. Do not use it directly! \" +\n-\t\t\t\t\"Use instead virt:bbmri-persistent attribute.\");\n-\t\treturn attr;\n-\t}\n+    public AttributeDefinition getAttributeDefinition() {\n+        AttributeDefinition attr = new AttributeDefinition();\n+        attr.setNamespace(AttributesManager.NS_USER_ATTR_DEF);\n+        attr.setFriendlyName(\"login-namespace:bbmri-persistent-shadow\");\n+        attr.setDisplayName(\"BBMRI login\");\n+        attr.setType(String.class.getName());\n+        attr.setDescription(\"Login to BBMRI. Do not use it directly! \" +\n+            \"Use instead virt:bbmri-persistent attribute.\");\n+        return attr;\n+    }\n }\n",
            "diff_size": 109
        },
        {
            "tool": "naturalize",
            "violations": [
                {
                    "line": "59",
                    "severity": "error",
                    "message": "Space before tab.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/naturalize/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\nindex 0cd9ec9cac5..b4d3a1d67b4 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/naturalize/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n@@ -27,7 +27,7 @@ import java.security.NoSuchAlgorithmException;\n  */\n public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow extends urn_perun_user_attribute_def_def_login_namespace {\n \n-        private final static Logger log = LoggerFactory.getLogger(urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.class);\n+\tprivate final static Logger log = LoggerFactory.getLogger(urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.class);\n         private final String extSourceNameBbmri = \"https://login.bbmri-eric.eu/idp/\";\n         private final String domainNameBbmri = \"@bbmri.eu\";\n         private final String attrNameBbmri = \"login-namespace:bbmri-persistent-shadow\";\n@@ -44,8 +44,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t */\n         @Override\n         public Attribute fillAttribute(PerunSessionImpl perunSession, User user, AttributeDefinition attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n-\n-\t\tAttribute filledAttribute = new Attribute(attribute);\n+\tAttribute filledAttribute = new Attribute(attribute);\n \n \t\tif (attribute.getFriendlyName().equals(this.attrNameBbmri)) {\n \t\t\treturn generateLoginValueBbmri(perunSession, user, filledAttribute);\n@@ -55,7 +54,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t\t}\n \t}\n \n-        /**\n+/**\n \t * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n \t * \tFormat is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n \t *\n@@ -66,7 +65,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t * @throws InternalErrorException\n \t * @throws WrongAttributeAssignmentException\n \t */\n-\tprivate Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n+private Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n \t\ttry {\n \t\t\tattribute.setValue(sha1HashCount(user).toString() + this.domainNameBbmri);\n \t\t\tcheckAttributeValue(sess, user, attribute);\n@@ -76,13 +75,13 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t\t}\n \t}\n \n-        /**\n+/**\n \t * Sha1HashCount() counts sha1hash for bbmri-persistent namespace from user's id\n \t *\n \t * @param user user with the id\n \t * @return counted hash\n \t */\n-\tprivate StringBuilder sha1HashCount(User user) throws InternalErrorException {\n+private StringBuilder sha1HashCount(User user) throws InternalErrorException {\n \t\ttry {\n \t\t\tMessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n \t\t\t// counts sha1hash and converts output to hex\n@@ -98,7 +97,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t\t}\n \t}\n \n-        /**\n+/**\n \t * ChangedAttributeHook() sets UserExtSource with following properties:\n \t *  - extSourceType is IdP\n \t *  - extSourceName is https://login.bbmri-eric.eu/idp/\n@@ -110,7 +109,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t * @throws cz.metacentrum.perun.core.api.exceptions.InternalErrorException\n \t * @throws cz.metacentrum.perun.core.api.exceptions.WrongReferenceAttributeValueException\n \t */\n-\t@Override\n+@Override\n \tpublic void changedAttributeHook(PerunSessionImpl session, User user, Attribute attribute) throws InternalErrorException, WrongReferenceAttributeValueException {\n \t\ttry {\n \t\t\tString userNamespace = attribute.getFriendlyNameParameter();\n@@ -128,8 +127,8 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t\t}\n \t}\n \n-        public AttributeDefinition getAttributeDefinition() {\n-\t\tAttributeDefinition attr = new AttributeDefinition();\n+public AttributeDefinition getAttributeDefinition() {\n+\tAttributeDefinition attr = new AttributeDefinition();\n \t\tattr.setNamespace(AttributesManager.NS_USER_ATTR_DEF);\n \t\tattr.setFriendlyName(\"login-namespace:bbmri-persistent-shadow\");\n \t\tattr.setDisplayName(\"BBMRI login\");\n@@ -138,4 +137,4 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t\t\t\t\"Use instead virt:bbmri-persistent attribute.\");\n \t\treturn attr;\n \t}\n-}\n+}\n\\ No newline at end of file\n",
            "diff_size": 12
        },
        {
            "tool": "codebuff",
            "violations": [],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/codebuff/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\nindex 0cd9ec9cac5..00f8e744f00 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/codebuff/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n@@ -4,7 +4,6 @@ import cz.metacentrum.perun.core.api.AttributesManager;\n import cz.metacentrum.perun.core.api.exceptions.*;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n-\n import cz.metacentrum.perun.core.api.Attribute;\n import cz.metacentrum.perun.core.api.AttributeDefinition;\n import cz.metacentrum.perun.core.api.ExtSource;\n@@ -25,117 +24,121 @@ import java.security.NoSuchAlgorithmException;\n  *\n  * @date 07.11.2016\n  */\n+\n+\n public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow extends urn_perun_user_attribute_def_def_login_namespace {\n \n-        private final static Logger log = LoggerFactory.getLogger(urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.class);\n-        private final String extSourceNameBbmri = \"https://login.bbmri-eric.eu/idp/\";\n-        private final String domainNameBbmri = \"@bbmri.eu\";\n-        private final String attrNameBbmri = \"login-namespace:bbmri-persistent-shadow\";\n+\n+ private final static Logger log = LoggerFactory.getLogger(urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.class);\n+ private final String extSourceNameBbmri = \"https://login.bbmri-eric.eu/idp/\";\n+ private final String domainNameBbmri = \"@bbmri.eu\";\n+ private final String attrNameBbmri = \"login-namespace:bbmri-persistent-shadow\";\n \n         /**\n-\t * Filling implemented for login:namespace:bbmri-persistent attribute\n-\t *\n-\t * @param perunSession PerunSession\n-\t * @param user User to fill attribute for\n-\t * @param attribute Attribute to fill value to\n-\t * @return Filled attribute\n-\t * @throws InternalErrorException\n-\t * @throws WrongAttributeAssignmentException\n-\t */\n-        @Override\n-        public Attribute fillAttribute(PerunSessionImpl perunSession, User user, AttributeDefinition attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n-\n-\t\tAttribute filledAttribute = new Attribute(attribute);\n-\n-\t\tif (attribute.getFriendlyName().equals(this.attrNameBbmri)) {\n-\t\t\treturn generateLoginValueBbmri(perunSession, user, filledAttribute);\n-\t\t} else {\n-\t\t\t// without value\n-\t\t\treturn filledAttribute;\n-\t\t}\n-\t}\n+  * Filling implemented for login:namespace:bbmri-persistent attribute\n+  *\n+  * @param perunSession PerunSession\n+  * @param user User to fill attribute for\n+  * @param attribute Attribute to fill value to\n+  * @return Filled attribute\n+  * @throws InternalErrorException\n+  * @throws WrongAttributeAssignmentException\n+  */\n+\n+ @Override\n+ public Attribute fillAttribute(PerunSessionImpl perunSession, User user, AttributeDefinition attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n+  Attribute filledAttribute = new Attribute(attribute);\n+  if (attribute.getFriendlyName().equals(this.attrNameBbmri)) {\n+   return generateLoginValueBbmri(perunSession, user, filledAttribute);\n+  } else {\n+   // without value\n+   return filledAttribute;\n+  }\n+ }\n \n         /**\n-\t * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n-\t * \tFormat is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n-\t *\n-\t * @param sess PerunSession\n-\t * @param user User to fill attribute for\n-\t * @param attribute Attribute to fill value with\n-\t * @return Filled attribute\n-\t * @throws InternalErrorException\n-\t * @throws WrongAttributeAssignmentException\n-\t */\n-\tprivate Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n-\t\ttry {\n-\t\t\tattribute.setValue(sha1HashCount(user).toString() + this.domainNameBbmri);\n-\t\t\tcheckAttributeValue(sess, user, attribute);\n-\t\t\treturn attribute;\n-\t\t} catch (WrongAttributeValueException ex) {\n-\t\t\treturn attribute;\n-\t\t}\n-\t}\n+  * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n+  *  Format is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n+  *\n+  * @param sess PerunSession\n+  * @param user User to fill attribute for\n+  * @param attribute Attribute to fill value with\n+  * @return Filled attribute\n+  * @throws InternalErrorException\n+  * @throws WrongAttributeAssignmentException\n+  */\n+\n+\n+ private Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n+  try {\n+   attribute.setValue(sha1HashCount(user).toString() + this.domainNameBbmri);\n+   checkAttributeValue(sess, user, attribute);\n+   return attribute;\n+  } catch (WrongAttributeValueException ex) {\n+   return attribute;\n+  }\n+ }\n \n         /**\n-\t * Sha1HashCount() counts sha1hash for bbmri-persistent namespace from user's id\n-\t *\n-\t * @param user user with the id\n-\t * @return counted hash\n-\t */\n-\tprivate StringBuilder sha1HashCount(User user) throws InternalErrorException {\n-\t\ttry {\n-\t\t\tMessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n-\t\t\t// counts sha1hash and converts output to hex\n-\t\t\tbyte[] result = mDigest.digest(ByteBuffer.allocate(4).putInt(user.getId()).array());\n-\t\t\tStringBuilder sb = new StringBuilder();\n-\t\t\tfor (int i = 0; i < result.length; i++) {\n-\t\t\t\tsb.append(Integer.toString((result[i] & 0xff) + 0x100, 16).substring(1));\n-\t\t\t}\n-\n-\t\t\treturn sb;\n-\t\t} catch (NoSuchAlgorithmException ex) {\n-\t\t\tthrow new InternalErrorException(\"Algorithm for sha1hash was not found.\", ex);\n-\t\t}\n-\t}\n+  * Sha1HashCount() counts sha1hash for bbmri-persistent namespace from user's id\n+  *\n+  * @param user user with the id\n+  * @return counted hash\n+  */\n+\n+\n+ private StringBuilder sha1HashCount(User user) throws InternalErrorException {\n+  try {\n+   MessageDigest mDigest = MessageDigest.getInstance(\"SHA1\");\n+   // counts sha1hash and converts output to hex\n+   byte[] result = mDigest.digest(ByteBuffer.allocate(4).putInt(user.getId()).array());\n+   StringBuilder sb = new StringBuilder();\n+   for (int i = 0; i<result.length; i++) {\n+    sb.append(Integer.toString((result[i] & 0xff) + 0x100, 16).substring(1));\n+   }\n+\n+   return sb;\n+  } catch (NoSuchAlgorithmException ex) {\n+   throw new InternalErrorException(\"Algorithm for sha1hash was not found.\", ex);\n+  }\n+ }\n \n         /**\n-\t * ChangedAttributeHook() sets UserExtSource with following properties:\n-\t *  - extSourceType is IdP\n-\t *  - extSourceName is https://login.bbmri-eric.eu/idp/\n-\t *  - user's extSource login is the same as his bbmri-persistent attribute\n-\t *\n-\t * @param session PerunSession\n-\t * @param user User to set UserExtSource for\n-\t * @param attribute Attribute containing bbmriID\n-\t * @throws cz.metacentrum.perun.core.api.exceptions.InternalErrorException\n-\t * @throws cz.metacentrum.perun.core.api.exceptions.WrongReferenceAttributeValueException\n-\t */\n-\t@Override\n-\tpublic void changedAttributeHook(PerunSessionImpl session, User user, Attribute attribute) throws InternalErrorException, WrongReferenceAttributeValueException {\n-\t\ttry {\n-\t\t\tString userNamespace = attribute.getFriendlyNameParameter();\n-\n-\t\t\tif(userNamespace.equals(\"bbmri-persistent-shadow\") && attribute.getValue() != null){\n-\t\t\t\tExtSource extSource = session.getPerunBl().getExtSourcesManagerBl().getExtSourceByName(session, extSourceNameBbmri);\n-\t\t\t\tUserExtSource userExtSource = new UserExtSource(extSource, 0, attribute.getValue().toString());\n-\n-\t\t\t\tsession.getPerunBl().getUsersManagerBl().addUserExtSource(session, user, userExtSource);\n-\t\t\t}\n-\t\t} catch (UserExtSourceExistsException ex) {\n-\t\t\tlog.warn(\"BBMRI IdP external source already exists for the user.\", ex);\n-\t\t} catch (ExtSourceNotExistsException ex) {\n-\t\t\tthrow new InternalErrorException(\"IdP external source for BBMRI doesn't exist.\", ex);\n-\t\t}\n-\t}\n-\n-        public AttributeDefinition getAttributeDefinition() {\n-\t\tAttributeDefinition attr = new AttributeDefinition();\n-\t\tattr.setNamespace(AttributesManager.NS_USER_ATTR_DEF);\n-\t\tattr.setFriendlyName(\"login-namespace:bbmri-persistent-shadow\");\n-\t\tattr.setDisplayName(\"BBMRI login\");\n-\t\tattr.setType(String.class.getName());\n-\t\tattr.setDescription(\"Login to BBMRI. Do not use it directly! \" +\n-\t\t\t\t\"Use instead virt:bbmri-persistent attribute.\");\n-\t\treturn attr;\n-\t}\n-}\n+  * ChangedAttributeHook() sets UserExtSource with following properties:\n+  *  - extSourceType is IdP\n+  *  - extSourceName is https://login.bbmri-eric.eu/idp/\n+  *  - user's extSource login is the same as his bbmri-persistent attribute\n+  *\n+  * @param session PerunSession\n+  * @param user User to set UserExtSource for\n+  * @param attribute Attribute containing bbmriID\n+  * @throws cz.metacentrum.perun.core.api.exceptions.InternalErrorException\n+  * @throws cz.metacentrum.perun.core.api.exceptions.WrongReferenceAttributeValueException\n+  */\n+\n+ @Override\n+ public void changedAttributeHook(PerunSessionImpl session, User user, Attribute attribute) throws InternalErrorException, WrongReferenceAttributeValueException {\n+  try {\n+   String userNamespace = attribute.getFriendlyNameParameter();\n+   if (userNamespace.equals(\"bbmri-persistent-shadow\") && attribute.getValue() != null) {\n+    ExtSource extSource = session.getPerunBl().getExtSourcesManagerBl().getExtSourceByName(session, extSourceNameBbmri);\n+    UserExtSource userExtSource = new UserExtSource(extSource, 0, attribute.getValue().toString());\n+    session.getPerunBl().getUsersManagerBl().addUserExtSource(session, user, userExtSource);\n+   }\n+  } catch (UserExtSourceExistsException ex) {\n+   log.warn(\"BBMRI IdP external source already exists for the user.\", ex);\n+  } catch (ExtSourceNotExistsException ex) {\n+   throw new InternalErrorException(\"IdP external source for BBMRI doesn't exist.\", ex);\n+  }\n+ }\n+\n+ public AttributeDefinition getAttributeDefinition() {\n+  AttributeDefinition attr = new AttributeDefinition();\n+  attr.setNamespace(AttributesManager.NS_USER_ATTR_DEF);\n+  attr.setFriendlyName(\"login-namespace:bbmri-persistent-shadow\");\n+  attr.setDisplayName(\"BBMRI login\");\n+  attr.setType(String.class.getName());\n+  attr.setDescription(\"Login to BBMRI. Do not use it directly! \" + \"Use instead virt:bbmri-persistent attribute.\");\n+  return attr;\n+ }\n+}\n\\ No newline at end of file\n",
            "diff_size": 112
        },
        {
            "tool": "styler_random",
            "violations": [
                {
                    "line": "60",
                    "severity": "error",
                    "message": "Space before tab.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/styler/05_predictions/random/files-repaired/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\nindex 0cd9ec9cac5..150b885fcd7 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/styler/05_predictions/random/files-repaired/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n@@ -55,7 +55,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t\t}\n \t}\n \n-        /**\n+/**\n \t * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n \t * \tFormat is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n \t *\n@@ -66,7 +66,9 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t * @throws InternalErrorException\n \t * @throws WrongAttributeAssignmentException\n \t */\n-\tprivate Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n+\n+\n+ private Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n \t\ttry {\n \t\t\tattribute.setValue(sha1HashCount(user).toString() + this.domainNameBbmri);\n \t\t\tcheckAttributeValue(sess, user, attribute);\n",
            "diff_size": 4
        },
        {
            "tool": "styler_three_grams",
            "violations": [
                {
                    "line": "60",
                    "severity": "error",
                    "message": "Space before tab.",
                    "source": "com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineCheck"
                }
            ],
            "diff": "diff --git a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/styler/05_predictions/three_grams/files-repaired/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\nindex 0cd9ec9cac5..0d8c4b4c1ba 100644\n--- a/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/violations/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n+++ b/home/fernanda/mnt/fernanda/git-styler/styler/src/experiments/projects/CESNET-perun/styler/05_predictions/three_grams/files-repaired/209/urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_shadow.java\n@@ -55,7 +55,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t\t}\n \t}\n \n-        /**\n+/**\n \t * GenerateLoginValueBbmri() fills login-namespace:bbmri-persistent attribute with generated value.\n \t * \tFormat is: \"[hash]@bbmri-europe.org\" where [hash] represents sha1hash counted from user's id.\n \t *\n@@ -66,7 +66,7 @@ public class urn_perun_user_attribute_def_def_login_namespace_bbmri_persistent_s\n \t * @throws InternalErrorException\n \t * @throws WrongAttributeAssignmentException\n \t */\n-\tprivate Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n+ private Attribute generateLoginValueBbmri(PerunSessionImpl sess, User user, Attribute attribute) throws InternalErrorException, WrongAttributeAssignmentException {\n \t\ttry {\n \t\t\tattribute.setValue(sha1HashCount(user).toString() + this.domainNameBbmri);\n \t\t\tcheckAttributeValue(sess, user, attribute);\n",
            "diff_size": 2
        }
    ],
    "repaired_by": [
        "checkstyle_idea",
        "codebuff"
    ],
    "not_repaired_by": [
        "styler",
        "naturalize",
        "styler_random",
        "styler_three_grams"
    ]
}